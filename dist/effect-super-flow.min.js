/**
 * UI Initiative Super Flow
 *
 * Realistic parallax & scale effects slider
 *
 * https://uiinitiative.com
 *
 * Copyright 2025 UI Initiative
 *
 * Released under the UI Initiative Regular License
 *
 * June 06, 2025
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).EffectSuperFlow=t()}(this,(function(){"use strict";return"undefined"!=typeof window&&window.SwiperElementRegisterParams&&window.SwiperElementRegisterParams(["superFlowEffect"]),function({swiper:e,on:t,extendParams:a}){a({superFlowEffect:{fragments:3,fragmentBorderWidth:1,fragmentBlur:!1,contentOffset:5,contentScale:1.2,scaleDuration:1e4,mainImageScale:1.1,level1Scale:1.15,level2Scale:1.2,level3Scale:1.25}});let r=null;const s=t=>{if(e.params.loop||e.params.virtual&&e.virtual&&e.params.virtual.enabled)return parseInt(t.getAttribute("data-swiper-slide-index"),10);return Array.from(e.slides).indexOf(t)},n=e=>{const t=e.querySelector(".super-flow-fragments"),a=t?[...t.children]:[],r=[0,1,6,7].map((e=>a[e])).filter(Boolean),s=[2,3,8,9].map((e=>a[e])).filter(Boolean),n=[4,5,10,11].map((e=>a[e])).filter(Boolean);return{allFragments:a,level1Fragments:r,level2Fragments:s,level3Fragments:n}},l=(t=0)=>e.isHorizontal()?`translate(${t}, 0)`:`translate(0, ${t})`,i=()=>{const{slides:t,rtlTranslate:a}=e,{size:i}=e;for(let o=0;o<t.length;o+=1){const f=t[o],m=s(f),c=f.querySelector(".super-flow-content"),p=f.querySelector(".super-flow-image"),d=f.querySelector(".super-flow-fragments"),{level1Fragments:u,level2Fragments:h,level3Fragments:g}=n(f),w=f.progress;let y,v=1,E=0,$=1,b=0,M=0,S=0,F=0,P=0;const x=a?-1:1;w<=0?(M=-e.params.superFlowEffect.contentOffset*x,y=i*w+e.translate*x,v=1.1-.1*Math.min(1,Math.abs(w)),E=20*x*Math.min(1,Math.abs(w)),$=.95+.05*Math.min(1,Math.abs(w)),S=30*x*Math.min(1,Math.abs(w)),F=20*x*Math.min(1,Math.abs(w)),P=10*x*Math.min(1,Math.abs(w))):(y=(e.translate-Math.min(w,1)*i*.09*x)*x,v=1.1,b=5*Math.min(1,Math.abs(w)),$=.95),a&&(y=-y),p&&(p.style.transform=`scale(${v}) ${l(E+"%")}`),d&&(d.style.transform=`scale(${$}) ${l(b+"%")}`),m!==r&&(c&&(c.style.transform=l(`${M}%`)),u.forEach((e=>{e.style.transform=l(S+"%")})),h.forEach((e=>{e.style.transform=l(F+"%")})),g.forEach((e=>{e.style.transform=l(P+"%")}))),f.style.transform=l(y+"px"),f.style.zIndex=e.slides.length-o}},o={left:[],right:[]},f=(e,t,a)=>{let r=0,s=0;"left"===e&&(0===t?(r=20+5*Math.random(),s=5+5*Math.random(),o.left.push([r,s])):1===t?(r=5+5*Math.random(),s=10+10*Math.random()):2===t&&(r=o.left[0][0]-10*Math.random(),s=o.left[0][1]-5*Math.random())),"right"===e&&(0===t?(r=5+5*Math.random(),s=20+10*Math.random(),o.right.push([r,s])):1===t?(r=10+10*Math.random(),s=5+5*Math.random()):2===t&&(r=o.right[0][0]-5*Math.random(),s=o.right[0][1]-10*Math.random()));const n="left"===e?[[0,0],[r,0],[s,100],[0,100]]:[[100,0],[100-r,0],[100-s,100],[100,100]];let l="",i="";return"left"===e&&(l=`polygon(${n.map((e=>e.map(((e,t)=>0===t?`calc(${e}% + ${a}px)`:`${e}%`)).join(" "))).join(",")})`),"right"===e&&(l=`polygon(${n.map((e=>e.map(((e,t)=>0===t?`calc(${e}% - ${a}px)`:`${e}%`)).join(" "))).join(",")})`),i=`polygon(${n.map((e=>e.map((e=>`${e}%`)).join(" "))).join(",")})`,{borderClipPath:l,imageClipPath:i}},m=()=>{const t=e.params.virtual&&e.virtual&&e.params.virtual.enabled?e.slides.find((t=>t.getAttribute("data-swiper-slide-index")===(e.params.loop?e.realIndex:e.activeIndex).toString())):e.slides[e.activeIndex],a=s(t),i=e.rtlTranslate?-1:1;if(a===r)return;r=a;const o=e.params.superFlowEffect,{scaleDuration:f,mainImageScale:m,level1Scale:c,level2Scale:p,level3Scale:d,contentOffset:u,contentScale:h}=o,g=t.querySelector(".super-flow-image > img"),w=t.querySelector(".super-flow-content"),{allFragments:y,level1Fragments:v,level2Fragments:E,level3Fragments:$}=n(t);g&&(g.style.transitionDuration="0ms",g.style.transitionTimingFunction="linear",g.style.transform=`${l()} scale(1)`),w&&(w.style.transitionDuration="0ms",g.style.transitionTimingFunction="linear",w.style.transform=l(-u*i+"%")),y.forEach((e=>{e.style.transitionDuration="0ms",e.style.transform=l()})),t.clientLeft,g&&(g.style.transitionDuration=`${f}ms`,g.style.transitionTimingFunction="linear",g.style.transform=`${l()} scale(${m})`),w&&(w.style.transitionDuration=`${f}ms`,w.style.transitionTimingFunction="linear",w.style.transform=`${l(u*i+"%")} scale(${h})`),y.forEach((e=>{e.style.transitionDuration=`${f}ms`,e.style.transitionTimingFunction="linear"})),v.forEach((e=>{e.style.transform=`${l()} scale(${c})`})),E.forEach((e=>{e.style.transform=`${l()} scale(${p})`})),$.forEach((e=>{e.style.transform=`${l()} scale(${d})`}))};let c=!1;t("beforeInit",(t=>{const a=t.params.superFlowEffect.fragmentBorderWidth,r=t.params.superFlowEffect.fragmentBlur,s=e.isHorizontal(),n=e.rtlTranslate;e.el.querySelectorAll(".super-flow-image").forEach((e=>{const l=e.querySelector("img:not(.super-flow-fragment)");if(!l)return;e.querySelectorAll(".super-flow-fragment, .super-flow-fragment-border").forEach((e=>{e.remove()}));const i=Math.random()>.5,o=(5+4*Math.random())/2,m=s?n?[[i?o:0,0],[100,0],[100,100],[i?0:o,100]]:[[0,0],[i?100-o:100,0],[i?100:100-o,100],[0,100]]:[[0,0],[100,0],[100,i?100-o:100],[0,i?100:100-o]];e.style.clipPath=`polygon(${m.map((e=>e.map((e=>`${e}%`)).join(" "))).join(",")})`;const c=document.createElement("div");c.classList.add("super-flow-fragments"),e.appendChild(c);const p=Math.min(Math.max(0,t.params.superFlowEffect.fragments),3);for(let e=0;e<p;e+=1){const t=l.cloneNode(!0),s=document.createElement("div");t.classList.add("super-flow-fragment"),s.classList.add("super-flow-fragment-border");const{borderClipPath:n,imageClipPath:i}=f("left",e,a);s.style.clipPath=n,t.style.clipPath=i,r&&(t.style.filter=`blur(${e+1}px)`),c.appendChild(s),c.appendChild(t)}for(let e=0;e<p;e+=1){const t=l.cloneNode(!0),s=document.createElement("div");t.classList.add("super-flow-fragment"),s.classList.add("super-flow-fragment-border");const{borderClipPath:n,imageClipPath:i}=f("right",e,a);s.style.clipPath=n,t.style.clipPath=i,r&&(t.style.filter=`blur(${e+1}px)`),c.appendChild(s),c.appendChild(t)}}))})),t("init",(()=>{0===e.params.initialSlide&&m()})),t("touchEnd",(()=>{c=!0,requestAnimationFrame((()=>{c=!1}))})),t("transitionStart",(()=>{c||m()})),t("transitionEnd",(()=>{e.slides.filter(((t,a)=>s(t)!==(e.params.loop?e.realIndex:e.activeIndex))).forEach(((e,t)=>{e.querySelectorAll("img, .super-flow-fragment, .super-flow-fragment-border").forEach((e=>{e.style.transitionDuration="0ms",e.style.transform=""}))})),m()})),t("virtualUpdate",i),function(e){const{effect:t,swiper:a,on:r,setTranslate:s,setTransition:n,overwriteParams:l,perspective:i,recreateShadows:o,getEffectParams:f}=e;let m;r("beforeInit",(()=>{if(a.params.effect!==t)return;a.classNames.push(`${a.params.containerModifierClass}${t}`),i&&i()&&a.classNames.push(`${a.params.containerModifierClass}3d`);const e=l?l():{};Object.assign(a.params,e),Object.assign(a.originalParams,e)})),r("setTranslate _virtualUpdated",(()=>{a.params.effect===t&&s()})),r("setTransition",((e,r)=>{a.params.effect===t&&n(r)})),r("transitionEnd",(()=>{if(a.params.effect===t&&o){if(!f||!f().slideShadows)return;a.slides.forEach((e=>{e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((e=>e.remove()))})),o()}})),r("virtualUpdate",(()=>{a.params.effect===t&&(a.slides.length||(m=!0),requestAnimationFrame((()=>{m&&a.slides&&a.slides.length&&(s(),m=!1)})))}))}({effect:"super-flow",swiper:e,on:t,setTranslate:i,setTransition:t=>{const{slides:a}=e;for(let e=0;e<a.length;e+=1){const n=a[e];let l="";s(n)!==r&&(l=", .super-flow-image img, .super-flow-fragment, .super-flow-fragment-border,  .super-flow-content"),[n,...n.querySelectorAll(`.super-flow-fragments, .super-flow-image${l}`)].forEach((e=>{e.style.transitionDuration=`${t}ms`}))}!function(e){let{swiper:t,duration:a,transformElements:r}=e;const{activeIndex:s}=t;if(t.params.virtualTranslate&&0!==a){let e,a=!1;e=r,e.forEach((e=>{!function(e,t){t&&e.addEventListener("transitionend",(function a(r){r.target===e&&(t.call(e,r),e.removeEventListener("transitionend",a))}))}(e,(()=>{if(a)return;if(!t||t.destroyed)return;a=!0,t.animating=!1;const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(e)}))}))}}({swiper:e,duration:t,transformElements:a})},perspective:()=>!1,overwriteParams:()=>{let t={};return e.passedParams.breakpoints&&Object.keys(e.passedParams.breakpoints).forEach((a=>{t[a]={...e.passedParams.breakpoints[a],slidesPerView:1,spaceBetween:0}})),{virtualTranslate:!0,centeredSlides:!1,slidesPerGroup:1,slidesPerView:1,watchSlidesProgress:!0,spaceBetween:0,breakpoints:t}}})}}));
//# sourceMappingURL=effect-super-flow.min.js.map